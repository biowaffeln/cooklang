import{j as N,r as b,_ as O,R as S,L as j,T as y,a as T,C as _,b as z,c as L}from"./vendor.c3cf8c48.js";const Q=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}};Q();const w=(s,i)=>new RegExp(s.map(t=>t.source).join("|"),i),A=/@(?<ingredientName>[^@#~ ]+)/,M=/@(?<ingredientName_>[^@#~]+){(?<ingredientQuantity>[^}]*)}/,q=/#(?<cookwareName>[^@#~ ]+)/,P=/#(?<cookwareName_>[^@#~]+){(?<cookwareQuantity>[^}]*)}/,I=/~(?<timerName>[^@#~]*?){(?<timerQuantity>[^}]*)}/,K=/^>>\s*(?<metaKey>.*?):\s*(?<metaValue>.*)$/,$=/--.*/,E=/\[- .+ -]/,W=w([K,M,A,P,q,I],"g"),B=w([$,E]),v=s=>({type:"text",value:s}),k=(s,i,t)=>({type:"ingredient",name:s,quantity:i,units:t}),R=(s,i)=>({type:"cookware",name:s,quantity:i}),D=(s,i,t)=>({type:"timer",name:s,quantity:i,units:t}),x=(s,i)=>{if(s.includes("/")){const[t,a]=s.split("/",2);return Number(t)/Number(a)}return Number(s)?Number(s):s.trim()===""?i:s.trim()},F=s=>{const i=[],t={},e=s.replace(B,"").split(`
`);for(const r of e){const o=[];let p=0;const C=r.matchAll(W);for(const u of C){if(u.index===void 0||u.groups===void 0)continue;const l=u.groups;if(p<u.index&&o.push(v(r.substring(p,u.index))),l.metaKey){const{metaKey:d,metaValue:m}=l;t[d.trim()]=m==null?void 0:m.trim()}else if(l.ingredientName){const{ingredientName:d}=l;o.push(k(d,"some",""))}else if(l.ingredientName_){const{ingredientName_:d,ingredientQuantity:m=""}=l,[h,f=""]=m.split("%",2),g=x(h,"some");o.push(k(d,g,f.trim()))}else if(l.cookwareName){const{cookwareName:d}=l;o.push(R(d,""))}else if(l.cookwareName_){const{cookwareName_:d,cookwareQuantity:m=""}=l;o.push(R(d,x(m,"")))}else if(l.timerName!==void 0){const{timerName:d,timerQuantity:m=""}=l,[h,f=""]=m.split("%",2),g=x(h,"");o.push(D(d,g,f.trim()))}p=u.index+u[0].length}p<r.length&&o.push(v(r.substring(p))),o.length>0&&i.push(o)}return{steps:i,metadata:t}},J=s=>{const{steps:i,metadata:t}=F(s),a=[],e=[];for(const r of i)for(const o of r)o.type==="ingredient"?a.push(o):o.type==="cookware"&&e.push(o);return{metadata:t,ingredients:a,cookware:e,steps:i}},n=N.exports.jsx,c=N.exports.jsxs,V=({name:s,recipe:i})=>c("div",{className:"p-4",children:[n("h2",{className:"text-3xl font-semibold mt-2",children:s}),n("section",{className:"mt-4 overflow-x-auto",children:n("table",{className:"table-fixed",children:n("tbody",{children:Object.entries(i.metadata).map(([t,a])=>c("tr",{children:[c("td",{className:"whitespace-nowrap font-medium pr-4 align-top",children:[t,":"]}),n("td",{className:"break-all align-top",children:(a==null?void 0:a.startsWith("http"))?n("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:a}):a})]},t))})})}),c("div",{className:"flex flex-wrap mt-8 gap-4",children:[c("section",{className:"p-4 border border-zinc-300 rounded min-w-[10rem] w-full md:w-auto relative",children:[n("h3",{className:"text-xs font-bold text-zinc-700 uppercase bg-white px-3 inline-block absolute -top-2 left-[5px]",children:"Ingredients"}),n("ul",{className:"mt-2 list-disc list-inside space-y-0.5",children:i.ingredients.map(t=>c("li",{className:"pr-2",children:[c("span",{className:"font-medium text-rose-700",children:[t.quantity," ",t.units]})," ",n("span",{children:t.name})]},t.name))})]}),c("section",{className:"p-4 border border-zinc-300 rounded min-w-[10rem] w-full md:w-auto relative",children:[n("h3",{className:"text-xs font-bold text-zinc-700 uppercase bg-white px-3 inline-block absolute -top-2 left-[5px]",children:"Cookware"}),n("ul",{className:"mt-2 list-inside list-disc",children:i.cookware.map(t=>c("li",{children:[n("span",{children:t.quantity}),n("span",{children:t.name})]},t.name))})]})]}),n("ol",{className:"list-decimal ml-6 mt-10 space-y-4",children:i.steps.map((t,a)=>n("li",{className:"text-lg leading-relaxed",children:t.map((e,r)=>{if(e.type==="text")return n("span",{"data-token":"text",children:e.value},r);if(e.type==="timer")return c("span",{"data-token":"timer",title:e.name,children:[e.quantity," ",e.units]},r);if(e.type==="ingredient")return n("span",{"data-token":"ingredient",title:`${e.quantity} ${e.units}`,children:e.name},r);if(e.type==="cookware")return n("span",{"data-token":"cookware",children:e.name},r)})},a))}),n("div",{className:"h-20"})]}),G=()=>{const[s,i]=b.exports.useState(H),[t,a]=b.exports.useState(U),e=J(s);return c("div",{className:"container px-4 mx-auto",children:[n(O,{href:"https://github.com/biowaffeln/cooklang-parser"}),n("h1",{className:"mt-16 text-3xl font-bold",children:"Cooklang Parser Demo"}),c("div",{className:"grid gap-6 mt-10 md:grid-cols-2",children:[c("div",{className:"flex flex-col h-[70vh]",children:[n("input",{className:"h-10 mb-2 border border-gray-300 rounded bg-gray-50 focus:outline-none focus:border-gray-400 px-4 py-2 text-lg",placeholder:"Recipe Name",value:t,onChange:r=>a(r.target.value)}),n("textarea",{className:"rounded border p-4 border-gray-300 bg-gray-50 text-lg text-gray-800 h-full resize-none focus:outline-none focus:border-gray-400",value:s,onChange:r=>i(r.target.value)})]}),c(S,{defaultValue:"Output",className:"max-h-[70vh] flex flex-col",children:[c(j,{className:"-mb-px flex gap-1",children:[n(y,{value:"Output",className:"tab",children:"Output"}),n(y,{value:"AST",className:"tab",children:"AST"})]}),c("div",{className:"overflow-y-auto border border-gray-300",children:[n(T,{value:"AST",children:n("pre",{className:"p-4 text-sm whitespace-pre-wrap text-gray-700",children:JSON.stringify(e,null,2)})}),n(_,{value:"Output",children:n(V,{name:t,recipe:e})})]})]})]})]})},H=`>> source: https://www.dinneratthezoo.com/wprm_print/6796
>> total time: 6 minutes
>> servings: 2

Place the @apple juice{1,5%cups}, @banana{one sliced}, @frozen mixed berries{1,5%cups} and @vanilla greek yogurt{3/4%cup} in a #blender{}; blend until smooth. If the smoothie seems too thick, add a little more liquid (1/4 cup). 

Taste and add @honey{} if desired. Pour into two glasses and garnish with fresh berries and mint sprigs if desired.
`,U="Mixed Berry Smoothie";z.render(n(L.StrictMode,{children:n(G,{})}),document.getElementById("root"));
